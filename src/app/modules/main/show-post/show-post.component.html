<section class="main">
  <div class="wrapper">
    <div class="left-col" *ngFor="let post of Posts">
      <div class="post" *ngIf="!post.Block">
        <div class="info">
          <div class="user">
            <img [src]="post.photoUrl" alt="" class="profile-pic" />
            <p class="username">{{ post.userName }}</p>
          </div>
          <button mat-button [matMenuTriggerFor]="menu" class="btn">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="ReportPost(post.postId)">
              Block
            </button>
          </mat-menu>
        </div>
        <img [src]="post.Url" height="600px" *ngIf="post.Type === 1" />
        <video
          controls
          autoplay
          *ngIf="post.Type === 2"
          style="width: 600px; height: 600px"
          muted
        >
          <source [src]="post.Url" type="video/mp4" />
        </video>
        <div class="post-content">
          <div class="reaction-wrapper">
            <button
              (click)="
                LikePost(
                  post.postId,
                  post?.Likes.includes(currentUserDetails?.uid),
                  post
                )
              "
              class="btn"
            >
              <mat-icon>{{
                !post?.Likes.includes(currentUserDetails?.uid)
                  ? "thumb_up"
                  : "thumb_down"
              }}</mat-icon>
            </button>
            <button
              (click)="isEmojiPickerVisible = !isEmojiPickerVisible"
              [disabled]="selectedEmoji"
              class="btn"
            >
              ðŸ˜€
            </button>
            <!-- <emoji-mart class="emoji-mart" *ngIf="isEmojiPickerVisible" (emojiSelect)="addEmoji(post.postId, post?.Likes.includes(currentUserDetails?.uid) ,$event )"
                            title="Choose your emoji"></emoji-mart> -->
          </div>
          <!-- <div *ngFor="let emoji of post.Emoji">
                            {{emoji}}
                        </div> -->
          <button mat-button [matMenuTriggerFor]="likes" class="btn">
            Liked by {{ post.Likes.length }}
          </button>

          <mat-menu #likes="matMenu" class="likes">
            <ul mat-menu-item *ngFor="let name of post.Names">
              <li>
                {{ name }}
              </li>
            </ul>
          </mat-menu>
          <p class="description">
            <span>{{ post.userName }} </span> {{ post.Description }}
          </p>
          <div class="post-time">
            {{ post.createdAt.toDate() | date : "medium" }}
          </div>
        </div>
        <div class="comment-wrapper">
          <div class="comment-box">
            <app-comment-box
              (add)="onSubmit($event, post.postId, post)"
            ></app-comment-box>
          </div>
          <button
            class="comments"
            (click)="post.showComment = !post.showComment"
            #commentShow
            *ngIf="post.Comments > 0"
          >
            show
            {{ post.Comments }}
            comments
          </button>
        </div>
        <div *ngIf="post.showComment">
          <div *ngFor="let c of Comments">
            <app-comment
              *ngIf="c.postId === post.postId && c.parentId === ''"
              [comment]="c"
            ></app-comment>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
